<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header sty-one">
        <h1 class="text-black">Add Product</h1>
        <ol class="breadcrumb">
            <li><a href="/admin">Home</a></li>
            <li class="sub-bread"><i class="fa fa-angle-right"></i> Products</li>
            <li><i class="fa fa-angle-right"></i>Add Products</li>
        </ol>
    </div>

    <!-- Main content -->
    <div class="content">
        <div class="row">
            <div class="col-lg-12">
                <div class="card card-outline">
                    <div class="card-header bg-blue">
                        <h5 class="text-white m-b-0">Add Product</h5>
                    </div>
                    <div class="container">
                        <div class="card-body">
                            <form enctype="multipart/form-data" action="/addNewProduct" method="POST">
                                <div class="form-group">
                                    <label for="exampleInputEmail1">Brand Name</label>
                                    <input type="text" class="form-control" id="exampleInputEmail1" name="brand"
                                        placeholder="Brand Name" required>
                                </div>
                                <div class="form-group">
                                    <label for="exampleInputPassword1">Product Name</label>
                                    <input type="text" class="form-control" name="name" id="exampleInputPassword1"
                                        placeholder="Product Name" required>
                                </div>
                                <div>
                                    <fieldset class="form-group">
                                        <label>Description</label>
                                        <textarea class="form-control" id="basicTextarea" name="description"
                                            placeholder="Description" rows="3" required></textarea>
                                    </fieldset>
                                </div>
                                <label>Category</label>
                                <div>
                                    <select class="form-control" name="category">
                                        {{#each category}}
                                        <option value="{{this._id}}">{{this.name}}</option>
                                        {{/each}}
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="exampleInputPassword1">Price</label>
                                    <input type="Number" class="form-control" name="price" id="exampleInputPassword1"
                                        placeholder="Price" required>
                                </div>
                                <div class="form-group">
                                    <label for="exampleInputPassword1">Quantity</label>
                                    <input type="Number" class="form-control" name="quantity" id="exampleInputPassword1"
                                        placeholder="Quantity" required>
                                </div>
                                <div class="form-group">
                                    <img id="menu_image" class="preview_img" />
                                    <label for="exampleInputFile">Image</label>
                                    <input type="file" name="Image" id="exampleInputFile" id="menu_images" accept="image/x-png,image/jpg,image/jpeg" required>
                                </div>
                                <button type="submit" class="btn btn-success">Submit</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    document.getElementById("menu_images").onchange = function () {
        var reader = new FileReader();
        if(this.files[0].size>528385){
            alert("Image Size should not be greater than 500Kb");
            $("#menu_image").attr("src","blank");
            $("#menu_image").hide();  
            $('#menu_images').wrap('<form>').closest('form').get(0).reset();
            $('#menu_images').unwrap();     
            return false;
        }
        if(this.files[0].type.indexOf("image")==-1){
            alert("Invalid Type");
            $("#menu_image").attr("src","blank");
            $("#menu_image").hide();  
            $('#menu_images').wrap('<form>').closest('form').get(0).reset();
            $('#menu_images').unwrap();         
            return false;
        }   
        reader.onload = function (e) {
            // get loaded data and render thumbnail.
            document.getElementById("menu_image").src = e.target.result;
            $("#menu_image").show(); 
        };

        // read the image file as a data URL.
        reader.readAsDataURL(this.files[0]);
    };
</script>