<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header sty-one">
        <h1 class="text-black">Edit Product</h1>
        <ol class="breadcrumb">
            <li><a href="/admin">Home</a></li>
            <li class="sub-bread"><i class="fa fa-angle-right"></i> Products</li>
            <li><i class="fa fa-angle-right"></i>Edit Products</li>
        </ol>
    </div>

    <!-- Main content -->
    <div class="content">
        <div class="row">
            <div class="col-lg-12">
                <div class="card card-outline">
                    <div class="card-header bg-blue">
                        <h5 class="text-white m-b-0">Edit Product</h5>
                    </div>
                    <div class="container">
                        <div class="card-body">
                            <form enctype="multipart/form-data" action="/updateProduct/{{product._id}}" method="POST">
                                <div class="form-group">
                                    <label for="exampleInputEmail1">Brand Name</label>
                                    <input type="text" class="form-control" id="exampleInputEmail1" value="{{product.brand}}" name="brand"
                                        placeholder="Brand Name" required>
                                </div>
                                <div class="form-group">
                                    <label for="exampleInputPassword1">Product Name</label>
                                    <input type="text" class="form-control" name="name" value="{{product.name}}" id="exampleInputPassword1"
                                        placeholder="Product Name" required>
                                </div>
                                <div>
                                    <fieldset class="form-group">
                                        <label>Description</label>
                                        <textarea class="form-control" value="{{product.description}}" id="basicTextarea" name="description"
                                            placeholder="Description" rows="3" required>{{product.description}}</textarea>
                                    </fieldset>
                                </div>
                                <label>Category</label>
                                <div>
                                    <select class="form-control" name="category">
                                        {{#each category}}
                                        <option value="{{this._id}}">{{this.name}}</option>
                                        {{/each}}
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="exampleInputPassword1">Price</label>
                                    <input type="Number" class="form-control" name="price" value="{{product.price}}" id="exampleInputPassword1"
                                        placeholder="Price" required>
                                </div>
                                <div class="form-group">
                                    <label for="exampleInputPassword1">Quantity</label>
                                    <input type="Number" class="form-control" name="quantity" value="{{product.quantity}}" id="exampleInputPassword1"
                                        placeholder="Quantity" required>
                                </div>
                                <div class="form-group">
                                    <img src="../product-images/{{product._id}}.jpg" alt="" id="imgView" style="height: 100px; width:100px;">
                                </div>
                                <div class="form-group">
                               <div class="form-group">
                                    <label for="exampleInputPassword1">Image</label>
                                    <div class="form-group">
                                        <img src="" alt="" style="width: 100px; height: 100px; display: none;"
                                            id="imgView">

                                    </div>
                                    <input type="file" accept="image/x-png,image/gif,image/jpeg" class="form-control"
                                        id="image" required name="Image" onchange="viewImage(event)">
                                </div>
                                <div>

                                    <h5 style="color: red; display:none;" id="image-warning">Please upload only images
                                    </h5>
                                    <button type="submit" class="btn btn-primary" id="add-product-button">Edit
                                        Product</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    function viewImage(event) {
        document.getElementById('imgView').src = URL.createObjectURL(event.target.files[0])
        let file = event.target.files[0].name

        let filename = file.split('.').pop()
        if (filename == 'jpeg' || filename == 'png' || filename == 'jpg') {
            $('#add-product-button').show()
            $('#image-warning').hide()
            $('#imgView').show()
        } else {
            $('#image-warning').show()
            $('#add-product-button').hide()
            $('#imgView').hide()
        }
    }
</script>